#VCS repo

- name: "Check if VSC repo is installed"
  stat: path="/etc/yum.repos.d/vscode.repo"
  register: vcs_repofile_result

#Import klicza do VSC repository
- rpm_key:
    state: present
    key: https://packages.microsoft.com/keys/microsoft.asc
  when: not vcs_repofile_result

- name: Add Visual Studio Code repository
  yum_repository:
    name: vscode
    description: Visual Studio Code repository
    baseurl: https://packages.microsoft.com/yumrepos/vscode
    gpgcheck: yes
    gpgkey: https://packages.microsoft.com/keys/microsoft.asc
  when: not vcs_repofile_result

#RPMFUSION

- name: install the rpmfusion repo packages
  dnf: 
    name: ['http://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-{{ ansible_distribution_major_version }}.noarch.rpm','http://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-{{ ansible_distribution_major_version }}.noarch.rpm']
    state: present


#Update repositories
- name: update repositories
  dnf: update_cache=yes

